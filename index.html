<!DOCTYPE html>
<html>
<head>
    <title>Home Questionnaire</title>
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-PGK9VKCL');</script>
    <!-- End Google Tag Manager -->
</head>
<body>

<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PGK9VKCL"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

<nav>
    <h3>Your Personalized Feed</h3>
    <div id="feed"></div>
</nav>
<button id="toggle" type="button">Toggle Cards Feed</button>
<button id="hide" type="button">Hide Cards Feed</button>
<button id="show" type="button">Show Cards Feed</button>

<script>
   const toggle = document.getElementById("toggle");
   const hide = document.getElementById("hide");
   const show = document.getElementById("show");
   const feed = document.getElementById("feed");

   // Ensure these functions are defined somewhere else if they are used
   toggle.onclick = function(){
      // Call Braze function or other logic if needed
   }

   hide.onclick = function(){
      // Call Braze function or other logic if needed
   }

   show.onclick = function(){
      // Call Braze function or other logic if needed
   }
</script>

<h1>What is your favorite place to travel?</h1>
<form name="travel" onsubmit="identify(event)">
    What is your favorite destination?
    <input name="destination" size="81" type="text"/>
    <br><br>
    Any recommendations (cool things to do, places to visit or restaurants to eat)?
    <br><br>
    <textarea cols="81" name="details" rows="3"></textarea>
    <br><br>
    First Name: <input name="firstname" size="75" type="text"/>
    <br><br>
    Last Name: <input name="lastname" size="75" type="text"/>
    <br><br>
    Email: <input name="email" size="75" type="text"/>
    <br><br>
    Number: <input name="number" size="75" type="number"/>
    <br><br>
    Preference: <input name="preference" size="75" type="text"/>
    <br><br>
    Custom Event: <input name="customevent" size="75" type="text"/>
    <br><br>
    external_id (optional): <input name="external_id" size="75" type="text"/>
    <br><br>
    <input name="Submit Form" type="submit" value="Submit"/>
</form>

<script type="text/javascript">
    function identify(e){
        e.preventDefault();
        var form = e.target;
        var email = form["email"].value;
        var firstname = form["firstname"].value;
        var lastname = form["lastname"].value;
        var destination = form["destination"].value;
        var number = form["number"].value;
        var details = form["details"].value;
        var preference = form["preference"].value;
        var customevent = form["customevent"].value;
        var external_id = form["external_id"].value;
        var user = {
            email: email,
            firstname: firstname,
            lastname: lastname,
            destination: destination,
            details: details,
            number: number
        };
        alert("The form was submitted");
        // Ensure to replace these calls with your logic or remove if not needed
        // braze.changeUser(external_id);
        // braze.logCustomEvent('Form Submitted', {'drewTestKey': true});
        // braze.getUser().setFirstName(firstname);
        // braze.getUser().setLastName(lastname);
        // braze.getUser().setPhoneNumber(number);
        // braze.getUser().setEmail(email);
        // braze.getUser().setCustomUserAttribute('fav_destination', destination);
        // braze.getUser().setCustomUserAttribute('recommendations', details);
        // braze.getUser().addToCustomAttributeArray('preference', preference);
        // braze.getDeviceId(function(deviceId) {
        //     braze.logCustomEvent(customevent, {'device_id': deviceId});
        //     console.log('The device id is ' + deviceId);
        // });
        window.location.reload();
    }
</script>

<button class="btn btn-primary" onclick="
    // Replace this call with your custom logic or remove if not needed
    // braze.logCustomEvent('Button Clicked', {
    //     'button_clicked': true
    // });
    // braze.getUser().setCustomUserAttribute('trait1','true');
"> Track: Button Clicked<span id="collapseExample" class="collapse" style="font-size: 0.85em;"><br></span></button>
<br><br>

<button id="scriptExample" class="ab-message-button" type="button" style="background-color: rgb(27, 120, 207);">
    <span style="color: rgb(255, 255, 255);">Email Form</span>
</button>
<script>
    document.querySelector("#scriptExample").onclick = function(){
        // Replace this call with your custom logic or remove if not needed
        // braze.getUser().setCustomUserAttribute("formClicked", true);
        // braze.logCustomEvent("Email Form Buttom Clicked");
        // braze.subscribeToInAppMessage(function(inAppMessage) {
        //     if (inAppMessage instanceof braze.InAppMessage) {
        //         const extras = inAppMessage.extras;
        //         if (extras) {
        //             for (const key in extras) {
        //                 braze.getUser().setCustomUserAttribute(key, extras[key]);
        //             }
        //         }
        //     }
        // });
    };
</script>

</body>
</html>
